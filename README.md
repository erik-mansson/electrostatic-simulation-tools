# electrostatic-simulation-tools
Some tools to efficiently use SIMION for electron and ion spectrometer design (VMI, 3D momentum, TOF)

These scripts and helper functions are released under the Mozilla Public License 2.0 (https://www.mozilla.org/en-US/MPL/2.0/). They are however not of much use without the commercial software packages SIMION (https://simion.com, © Scientific Instrument Services, Inc.) and MATLAB (https://www.mathworks.com/products/matlab.html, © The MathWorks, Inc.) which this project has no involvement in. Altohugh much source code in the Matlab language can be run by GNU Octave (https://www.gnu.org/software/octave/, https://en.wikipedia.org/wiki/GNU_Octave), sometimes after minor changes, the compatibility of this project is unknown.

SIMION has a graphical user interface and allows user-defined code to be provided in a script in the Lua language (https://www.lua.org/docs.html, https://en.wikipedia.org/wiki/Lua_(programming_language)). The file "script to copy and name as each model.lua" with Lua source code is at the heart of this project's helper-tools. If a copy of this file is named like your SIMION-model of your spectrometer, and located in the same directory, it will be run when you fly particles in the SIMION GUI as well as when launching such a run from the command line. The Lua script introduces GUI-adjustable variables, as well as some command-line-only variables, which can control various aspects of how particle trajectories are initialized and then analyzed to print a summary with statisticas that attempts to let a user judge the "resolution" (of velocity map imaging spectrometers, 3D-momentum spectrometers/reaction microscopes as well as the time of flight aspect for mass- or energy spectroscopy). By keeping an eye on some values in the resolution summary, an interactive optimization/tuning can be made of the electrostatic potentials (voltages) by changing them (or changing something like start-position). The voltages can be controlled either by the standard SIMION GUI ("fast adjust potentials"), via GUI-variables of the Lua-script (can be simpler for a design with resistor chains), via the SIMION command line and variables of the Lua-script (to quickly paste an array of electric potentials), or at a higher level by letting MATLAB run automatic optimizations of an objective function that launches SIMION and assigns a score to the simulation results.
